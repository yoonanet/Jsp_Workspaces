<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>JSON 이용하기 - $.getJSON()</title>

<style type="text/css">
	th, td { 
		border: 1px solid gray;
	}
</style>

<!-- 자바스크립트의 문법으로 ajax를 적용하는 것은 상당히 쉽지만은 않다.
     jQuery안에서는 ajax라고 하는 기술을 많이 활용하는 기능들을 이미 구현해서 제공을 해주고 있음  
     따라서 jQuery에서 제공해주고 있는 JSON을 활용하여 실습하도록 한다. => 구글CDN방식을 통해 jQuery를 사용하도록 한다. 
     ***서버에 담겨진 데이터를 비동기 방식의 요청으로 데이터를 전달받아서 화면에 업데이트를 해주고자할 때 유용하게 활용할 수 있는 방법이다. -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.3/jquery.min.js"></script> 
<script type="text/javascript">
$(function(){ //ready이벤트: body영역을 브라우저가 다 읽어갔을 때 jQuery가 감지하고 있다가 우리가 입력으로 전달한 함수를 호출하게끔 동작이 되어진다.	
	$.getJSON('item.json', function(data, textStatus){ //첫번째 매개변수에는 서버에 요청할 페이지에 대한 정보를 넣어주고, 두번째 매개변수에는 함수를 등록해주도록 한다.
	//getJSON이라는 함수는 비동기적으로 수행과 동시에 함수가 서버에 지정한 파일을 요청한다. 그렇게 요청을 받은 서버는 해당페이지에 
	//데이터를 응답으로 보내줄 것이고, getJSON함수는 응답이 완료된 순간 두번째 매개변수로 등록한 함수를 호출해주게 된다.
	//이때, 서버로부터 전달된 데이터를 바로 사용자 정의 함수의 첫번째 매개변수에 전달을 해서 호출해준다.
	//따라서 호출이 되어지는 시점에는 서버로부터 이파일을 첫번째 매개변수로 전달을 받았다는 의미가 되는 것이다. 
		$('#treeData').append( //append(): 기존에 선택되어지는 엘리먼트 바로 뒤쪽에 입력으로 넣어준 태그를 자식의 형태로 추가해주는 기능 
		             //stringbuilder, stringbuffer라는 클래스에서 보면 문자열 결합에서 append메소드를 활용했었음!!
		             //(기존 데이터에 덧붙일 때 append라는 이름으로 기능을 제공해주는 것이 일반적임)
				"<tr>" +
					"<th>id</th>"+
					"<th>name</th>"+
					"<th>price</th>"+
					"<th>description</th>"+
				"</tr>"
		);
		
		//each(주로 배열데이터일 때 활용)라고 하는 함수는 data에 담겨진 배열 데이터를 하나씩 꺼내올 때마다 두번째 매개변수로 전달한 함수를 호출해주게끔 한다. 
		//(모든 데이터들을 다 읽어올 때까지 하나하나씩 데이터를 꺼내오면서 등록한 함수를 호출하게끔 동작되어지는 함수였음)
		$.each(data, function(){
			$('#treeData').append(
					"<tr>"+
						"<td>"+this.id+"</td>"+ //json의 데이터 관리 형태가 map이기 때문에 현재 전달받은 data의 key값으로 접근을 하여 value값을 출력하도록 한다.
						"<td>"+this.name+"</td>"+
						"<td>"+this.price+"</td>"+
						"<td>"+this.description+"</td>"+
					"</tr>"
			);
		});
	}); 
	
});
</script>

</head>
<body>

<!-- 
[JSON(JavaScript Object Notation)]
Ajax의 x가 XML의 약자였고, 웹상에서 데이터를 주고받고자할 때의 양식 폼이 XML이였음. 추가적으로 JSON의 자료형을 제공하고 있음
XML데이터를 대신하기 위해 사용된다. => key, value의 형태로 데이터 구조를 가짐
JSON 저장되는 정보 형태 => 배열(대괄호안에 중괄호를 사용해서 조합임), 객체

용량이 있는 데이터를 주고받을 때는 xml과 json을 통해서 주고받게 됨.
json의 포맷과 xml의 포맷의 기준을 체크하도록 하자. => key,value형태로 데이터를 관리하는 것이 json이라고 기억하면 됨.
                                                      map의 형태의 데이터를 객체에 담아서 표현할 수 있음

페이지에 대한 정보를 전달받는데 데이터를 전달하는데에만 포커스를 두고, 클라이언트의 브라우저는 서버의 부하를 최소화하면서
실질적인 서버로부터 데이터를 전달받아서 화면을 구성하게끔 하는 처리는 자바스크립트에서 수행을 하게끔 하는 처리가 
자바스크립트에서 수행하는 환경이 스마트폰 때문에 UI 서비스가 아주많이 적용이 되어지고 있다.

지금 현재는 json포맷이 표현의 형태가 간단하다보니까 선호함.
------------------------------------------------------------------------------------------------------------------------------------------

이렇게 화면을 비동기적으로 간단하게 구성해놓고 실제 이벤트가 발생했을 때 그 데이터들을 전달받아서 
전달받은 데이터를 통해 직접 자바스크립트 안에서 화면을 구성하면서 데이터의 목록을 보여주도록 한다!!
 => 요즘에는 댓글에 대한 처리를 ajax로 많이 처리함. (댓글에 대한 이벤트 처리를 비동기적으로 처리하는 것임) 
-->
 
<!-- main화면이 이미 응답으로 받아서 준비가 되어져 있고, 그 화면에 일부영역이 눈에는 보이지 않지만 table로써 ui를 구성해주고 있다고 생각 -->  
	<table id="treeData"></table>



</body>
</html>